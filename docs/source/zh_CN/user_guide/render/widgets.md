# ğŸ–¼ï¸ Widget ç»„ä»¶

## æ¦‚è¿°

Widget ç³»ç»Ÿå…è®¸æ‚¨åœ¨æ¸²æŸ“çª—å£ä¸­åˆ›å»ºå¤šä¸ªå¯è§†åŒ–çš„ç»„ä»¶ï¼ŒåŒ…æ‹¬ç›¸æœºè§†å£ï¼ˆCameraViewportï¼‰å’Œè‡ªå®šä¹‰å›¾åƒï¼ˆImageWidgetï¼‰ã€‚è¿™å¯¹äºå¤šè§†è§’è§‚å¯Ÿã€ä¼ æ„Ÿå™¨æ•°æ®å¯è§†åŒ–ã€è‡ªå®šä¹‰ UI æ˜¾ç¤ºç­‰åœºæ™¯éå¸¸æœ‰ç”¨ã€‚

```{video} /_static/videos/rgbd_camera.mp4
:caption: å³ä¸Šè§’å±•ç¤ºäº†ä½¿ç”¨ Camera Viewport Widget ç»„ä»¶æ˜¾ç¤ºçš„ RGBD ä¼ æ„Ÿå™¨ç”»é¢
:nocontrols:
:autoplay:
:playsinline:
:muted:
:loop:
:width: 100%
```

### ä¸»è¦ç‰¹æ€§

-   **å¤šç§ Widget ç±»å‹**: æ”¯æŒç›¸æœºè§†å£ï¼ˆCameraViewportï¼‰å’Œè‡ªå®šä¹‰å›¾åƒï¼ˆImageWidgetï¼‰
-   **å¤šç»„ä»¶æ”¯æŒ**: åœ¨åŒä¸€çª—å£ä¸­åˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„ widget ç»„ä»¶
-   **çµæ´»å¸ƒå±€**: æ”¯æŒåƒç´ ã€ç™¾åˆ†æ¯”å’Œè‡ªåŠ¨ä¸‰ç§å¸ƒå±€æ ¼å¼
-   **åŠ¨æ€æ›´æ–°**: å®æ—¶æ›´æ–° widget çš„å†…å®¹ã€å¸ƒå±€å’Œå±æ€§

## Widget ç±»å‹

MotrixSim æä¾›ä»¥ä¸‹ä¸¤ç§ Widget ç±»å‹ï¼š

```{toctree}
:maxdepth: 1

camera_viewport
image_widget
```

### æ ¸å¿ƒæ¦‚å¿µ

åœ¨å¼€å§‹ä½¿ç”¨ widget ä¹‹å‰ï¼Œéœ€è¦äº†è§£ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š

-   **Layoutï¼ˆå¸ƒå±€ï¼‰**: é…ç½® widget çš„ä½ç½®å’Œå¤§å°
-   **CameraViewportï¼ˆç›¸æœºè§†å£ï¼‰**: æ˜¾ç¤ºç›¸æœºç”»é¢çš„ widget ç»„ä»¶
-   **ImageWidgetï¼ˆå›¾åƒç»„ä»¶ï¼‰**: æ˜¾ç¤ºè‡ªå®šä¹‰å›¾åƒçš„ widget ç»„ä»¶
-   **RenderWidgetsï¼ˆWidget æ¥å£ï¼‰**: åˆ›å»ºå’Œç®¡ç† widget çš„ä¸»è¦æ¥å£

## Layout é…ç½®ç³»ç»Ÿ

Layout ç±»ç”¨äºé…ç½® widget åœ¨å±å¹•ä¸Šçš„ä½ç½®å’Œå¤§å°ã€‚å®ƒæä¾›äº† 6 ä¸ªå¸ƒå±€å‚æ•°ï¼š

-   **left**: å·¦ä¾§ä½ç½®
-   **right**: å³ä¾§ä½ç½®
-   **top**: é¡¶éƒ¨ä½ç½®
-   **bottom**: åº•éƒ¨ä½ç½®
-   **width**: å®½åº¦
-   **height**: é«˜åº¦

### å¸ƒå±€æ ¼å¼

Layout å‚æ•°æ”¯æŒä¸‰ç§æ ¼å¼ï¼š

#### åƒç´ æ ¼å¼

ç›´æ¥ä½¿ç”¨æ•°å€¼è¡¨ç¤ºåƒç´ ï¼š

```python
layout = Layout(left=50, top=50, width=200, height=150)
```

è¿™è¡¨ç¤º widget è·ç¦»å·¦ä¾§ 50 åƒç´ ï¼Œè·ç¦»é¡¶éƒ¨ 50 åƒç´ ï¼Œå®½åº¦ 200 åƒç´ ï¼Œé«˜åº¦ 150 åƒç´ ã€‚

#### ç™¾åˆ†æ¯”æ ¼å¼

ä½¿ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºç™¾åˆ†æ¯”ï¼š

```python
layout = Layout(left="10%", top="10%", width="30%", height="30%")
```

è¿™è¡¨ç¤º widget è·ç¦»å·¦ä¾§ 10%ï¼Œè·ç¦»é¡¶éƒ¨ 10%ï¼Œå®½åº¦å  30%ï¼Œé«˜åº¦å  30%ã€‚

#### è‡ªåŠ¨æ ¼å¼

ä½¿ç”¨"auto"å­—ç¬¦ä¸²è¡¨ç¤ºè‡ªåŠ¨å¸ƒå±€ï¼š

```python
layout = Layout(width="auto", height="auto")
```

å®½åº¦å’Œé«˜åº¦ä¼šæ ¹æ®å†…å®¹è‡ªåŠ¨è°ƒæ•´ã€‚

#### æ··åˆæ ¼å¼

å¯ä»¥æ··åˆä½¿ç”¨ä¸åŒçš„æ ¼å¼ï¼š

```python
layout = Layout(left=10, top="60%", width=320, height=240)
```

è¿™è¡¨ç¤ºå·¦ä¾§è·ç¦» 10 åƒç´ ï¼Œé¡¶éƒ¨è·ç¦» 60%ï¼Œå®½åº¦ 320 åƒç´ ï¼Œé«˜åº¦ 240 åƒç´ ã€‚

### å¸ƒå±€ç¤ºä¾‹

ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†ä¸‰ç§ä¸åŒçš„å¸ƒå±€æ ¼å¼ï¼š

```{literalinclude} ../../../../examples/render/camera_viewport.py
:language: python
:dedent:
:start-after: "# Viewport 1: Top-left with pixel-based layout"
:end-before: "# Store initial layouts"
```

```{note}
æ‚¨å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„å¸ƒå±€æ ¼å¼ã€‚åƒç´ å¸ƒå±€é€‚åˆå›ºå®šUIï¼Œç™¾åˆ†æ¯”å¸ƒå±€é€‚åˆå“åº”å¼è®¾è®¡ã€‚
```

## æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

```{warning}
é¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯widgetï¼Œè¿™ä¼šå½±å“æ€§èƒ½ã€‚å»ºè®®åœ¨åˆå§‹åŒ–æ—¶åˆ›å»ºæ‰€æœ‰éœ€è¦çš„widgetï¼Œç„¶åä½¿ç”¨update()æ–¹æ³•åŠ¨æ€æ›´æ–°å®ƒä»¬çš„å±æ€§ã€‚
```

### å¸ƒå±€å»ºè®®

1. **åƒç´ å¸ƒå±€**: é€‚ç”¨äºå›ºå®š UI å…ƒç´ ï¼Œå¦‚æŒ‰é’®ã€é¢æ¿ç­‰
2. **ç™¾åˆ†æ¯”å¸ƒå±€**: é€‚ç”¨äºéœ€è¦å“åº”å¼è®¾è®¡çš„åœºæ™¯
3. **é¿å…é‡å **: ç¡®ä¿å¤šä¸ª widget ä¸ä¼šé‡å ï¼Œä»¥å…ç›¸äº’é®æŒ¡
4. **é¢„åŠ è½½å¸ƒå±€**: åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®å¥½æ‰€æœ‰ widget çš„å¸ƒå±€ï¼Œå‡å°‘è¿è¡Œæ—¶è°ƒæ•´

## ç›¸å…³ API é“¾æ¥

-   [`Layout`]
-   [`CameraViewport`]
-   [`ImageWidget`]
-   [`Image`]
-   [`RenderWidgets`]

[`Layout`]: motrixsim.render.Layout
[`CameraViewport`]: motrixsim.render.widgets.CameraViewport
[`ImageWidget`]: motrixsim.render.widgets.ImageWidget
[`Image`]: motrixsim.render.Image
[`RenderWidgets`]: motrixsim.render.RenderWidgets
